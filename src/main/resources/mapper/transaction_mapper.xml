<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.book.transaction.dao.TransactionListDAO">

	<select id="searchUserChange" parameterType="TransactionListDTO">
		select m.member_nickname,c.code_codename,l.library_idx from library l inner join member m on l.member_idx = m.member_idx inner join code c on m.code_idx = c.code_idx
		where l.library_isbn = #{isbn} and l.library_use = '교환';
	</select>
	
	<select id="searchUserRent" parameterType="TransactionListDTO">
		select m.member_nickname,c.code_codename,l.library_idx from library l inner join member m on l.member_idx = m.member_idx inner join code c on m.code_idx = c.code_idx
		where l.library_isbn = #{isbn} and l.library_use = '대여';
	</select>

		<select id="searchDetail" resultType="TransactionListDTO">
		SELECT * FROM library WHERE library_idx=#{library_idx}
	</select>
	
			<select id="changeMyBook" resultType="TransactionListDTO">
		SELECT * FROM library WHERE member_idx =#{member_idx}
	</select>
	
	<select id="deposit" resultType="String">
		SELECT COALESCE(SUM(deposit_use_price), 0) FROM deposit_use WHERE member_idx=#{param1}
	</select>

</mapper>